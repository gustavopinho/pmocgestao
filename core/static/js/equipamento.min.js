var appAnexo=new Vue({el:"#app-anexo",delimiters:["[[","]]"],data:{empresa:"",cliente:"",equipamento:"",nome:"",files:[],progress:0},methods:{uploadAnexo:function(){if(this.file){var e=new FormData;e.set("anexo",this.file),e.set("nome",this.nome);var t="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/equipamento-anexo/"+this.equipamento+"/create";this.progress=0,this.$http.post(t,e,{progress:e=>{e.lengthComputable&&(this.progress=parseInt(Math.round(100*e.loaded/e.total)))}}).then(e=>{alert(e.body.message),this.reset(),this.listAnexo()},e=>{console.log(e.body.message)})}else alert("É necessário escolher um arquivo!")},processAnexo:function(e){this.file=e.target.files[0]},listAnexo:function(){var e="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/equipamento-anexo/"+this.equipamento+"/list";this.$http.get(e).then(e=>{this.files=e.body.results},e=>{console.log(e.body)})},deleteAnexo:function(e){if(confirm("Deseja excluír esse anexo?")){var t="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/equipamento-anexo/"+this.equipamento+"/delete/"+e;this.$http.get(t).then(e=>{alert(e.body.message),this.reset(),this.listAnexo()},e=>{console.log(e.body)})}},reset(){const e=this.$refs.fileInput;e.type="text",e.type="file",this.file=null,this.nome="",this.progress=0}}});