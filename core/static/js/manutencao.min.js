var appOperacao=new Vue({el:"#app-operacao",delimiters:["[[","]]"],data:{baseUrl:"",empresa:"",cliente:"",grupo:0,grupo_operacao:[],operacoes:[],checkedOperacoes:[],manutencaoOperacoes:[]},methods:{grupoOperacao:function(){var e="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/operacoes/"+this.manutencao+"/grupo-operacao";this.$http.get(e).then(e=>{this.grupo_operacao=e.body.results},e=>{console.log(e.body)})},getOperacoes:function(){var e="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/operacoes/"+this.manutencao+"/grupo/"+this.grupo;this.checkedOperacoes=[],this.$http.get(e).then(e=>{this.operacoes=e.body.results},e=>{console.log(e.body)})},allOperacoes:function(){var e="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/operacoes/"+this.manutencao+"/all";this.$http.get(e).then(e=>{this.manutencaoOperacoes=e.body.results},e=>{console.log(e.body)})},saveOperacoes:function(){var e=new FormData;if(e.set("operacoes",this.checkedOperacoes),this.checkedOperacoes.length>0){var t="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/operacoes/"+this.manutencao+"/save";this.$http.post(t,e).then(e=>{alert(e.body.message),this.getOperacoes(),this.allOperacoes()},function(e){console.log(e.body)})}},deleteOperacoes:function(e){var t="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/operacoes/"+this.manutencao+"/delete/"+e;confirm("Deseja excluír essa operação?")&&this.$http.get(t).then(e=>{alert(e.body.message),this.allOperacoes()},function(e){console.log(e.body)})}}}),appMedicao=new Vue({el:"#app-medicao",delimiters:["[[","]]"],data:{baseUrl:"",empresa:"",cliente:"",manutencao:"",item:{id:0,pressao_baixa:0,pressao_alta:0,temperatura_insuflamento:0,temperatura_retorno:0,tensao:0,corrente:0,observacao:""},items:[]},methods:{saveMedicao:function(){var e="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/medicoes/"+this.manutencao+"/save";this.item.pk&&(e=e+"/"+this.item.pk);var t=new FormData;t.set("pressao_baixa",this.item.pressao_baixa),t.set("pressao_alta",this.item.pressao_alta),t.set("temperatura_insuflamento",this.item.temperatura_insuflamento),t.set("temperatura_retorno",this.item.temperatura_retorno),t.set("tensao",this.item.tensao),t.set("corrente",this.item.corrente),t.set("observacao",this.item.observacao),this.$http.post(e,t).then(e=>{alert(e.body.message),this.refreshMedicao(),this.allMedicoes()},function(e){})},allMedicoes:function(){var e="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/medicoes/"+this.manutencao+"/all";this.$http.get(e).then(e=>{this.items=e.body.results},e=>{})},getMedicoes:function(e){var t="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/medicoes/"+this.manutencao+"/save/"+e;this.$http.get(t).then(e=>{this.item=e.body.result},e=>{})},refreshMedicao:function(){this.item={id:0,pressao_baixa:0,pressao_alta:0,temperatura_insuflamento:0,temperatura_retorno:0,tensao:0,corrente:0,observacao:""}},deleteMedicoes:function(e){var t="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/medicoes/"+this.manutencao+"/delete/"+e;confirm("Deseja excluír essa medição?")&&this.$http.get(t).then(e=>{alert(e.body.message),this.allMedicoes()},e=>{})}}}),appAnexo=new Vue({el:"#app-anexo",delimiters:["[[","]]"],data:{empresa:"",cliente:"",manutencao:"",nome:"",files:[],progress:0},methods:{uploadAnexo:function(){if(this.file){var e=new FormData;e.set("anexo",this.file),e.set("nome",this.nome);var t="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/registro-manutencao-anexo/"+this.manutencao+"/create";this.progress=0,this.$http.post(t,e,{progress:e=>{e.lengthComputable&&(this.progress=parseInt(Math.round(100*e.loaded/e.total)))}}).then(e=>{alert(e.body.message),this.reset(),this.listAnexo()},e=>{this.reset(),alert("Falha ao adicionar anexo!"),console.log(e.body.message)})}else alert("É necessário escolher um arquivo!")},processAnexo:function(e){this.file=e.target.files[0]},listAnexo:function(){var e="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/registro-manutencao-anexo/"+this.manutencao+"/list";this.$http.get(e).then(e=>{this.files=e.body.results},e=>{console.log(e.body)})},deleteAnexo:function(e){if(confirm("Deseja excluír esse anexo?")){var t="/empresa/"+this.empresa+"/cliente/"+this.cliente+"/registro-manutencao-anexo/"+this.manutencao+"/delete/"+e;this.$http.get(t).then(e=>{alert(e.body.message),this.reset(),this.listAnexo()},e=>{console.log(e.body)})}},reset(){const e=this.$refs.fileInput;e.type="text",e.type="file",this.file=null,this.nome="",this.progress=0}}});